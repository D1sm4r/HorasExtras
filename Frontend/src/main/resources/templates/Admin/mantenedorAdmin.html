<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ADMINISTRADOR</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" th:href="@{https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback}" />

  <!-- Font Awesome -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/fontawesome-free/css/all.min.css}" />

  <!-- daterange picker -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/daterangepicker/daterangepicker.css}" />

  <!-- iCheck for checkboxes and radio inputs -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/icheck-bootstrap/icheck-bootstrap.min.css}" />

  <!-- Bootstrap Color Picker -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css}" />

  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css}" />

  <!-- Select2 -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/select2/css/select2.min.css}" />
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css}" />

  <!-- Bootstrap4 Duallistbox -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/bootstrap4-duallistbox/bootstrap-duallistbox.min.css}" />

  <!-- BS Stepper -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/bs-stepper/css/bs-stepper.min.css}" />

  <!-- dropzonejs -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/dropzone/min/dropzone.min.css}" />

  <!-- Theme style -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/dist/css/adminlte.min.css}" />

  <!-- DataTables -->
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css}" />
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/datatables-responsive/css/responsive.bootstrap4.min.css}" />
  <link rel="stylesheet" th:href="@{/AdminLTE-3.2.0/plugins/datatables-buttons/css/buttons.bootstrap4.min.css}" />
  <!-- DataTables -->
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="index3.html" class="nav-link">Home</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="#" class="nav-link">Contact</a>
      </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <!-- Navbar Search -->
      <li class="nav-item">
        <a class="nav-link" data-widget="navbar-search" href="#" role="button">
          <i class="fas fa-search"></i>
        </a>
        <div class="navbar-search-block">
          <form class="form-inline">
            <div class="input-group input-group-sm">
              <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
              <div class="input-group-append">
                <button class="btn btn-navbar" type="submit">
                  <i class="fas fa-search"></i>
                </button>
                <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
      </li>

      <!-- Messages Dropdown Menu -->
      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-comments"></i>
          <span class="badge badge-danger navbar-badge">3</span>
        </a>
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <a href="#" class="dropdown-item">
            <!-- Message Start -->
            <div class="media">
              <img src="dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
              <div class="media-body">
                <h3 class="dropdown-item-title">
                  Brad Diesel
                  <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                </h3>
                <p class="text-sm">Call me whenever you can...</p>
                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
              </div>
            </div>
            <!-- Message End -->
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <!-- Message Start -->
            <div class="media">
              <img src="dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
              <div class="media-body">
                <h3 class="dropdown-item-title">
                  John Pierce
                  <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                </h3>
                <p class="text-sm">I got your message bro</p>
                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
              </div>
            </div>
            <!-- Message End -->
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <!-- Message Start -->
            <div class="media">
              <img src="dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
              <div class="media-body">
                <h3 class="dropdown-item-title">
                  Nora Silvester
                  <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                </h3>
                <p class="text-sm">The subject goes here</p>
                <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
              </div>
            </div>
            <!-- Message End -->
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
        </div>
      </li>
      <!-- Notifications Dropdown Menu -->
      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-bell"></i>
          <span class="badge badge-warning navbar-badge">15</span>
        </a>
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <span class="dropdown-header">15 Notifications</span>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-envelope mr-2"></i> 4 new messages
            <span class="float-right text-muted text-sm">3 mins</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-users mr-2"></i> 8 friend requests
            <span class="float-right text-muted text-sm">12 hours</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">
            <i class="fas fa-file mr-2"></i> 3 new reports
            <span class="float-right text-muted text-sm">2 days</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
          <i class="fas fa-th-large"></i>
        </a>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="index3.html" class="brand-link">
      <span class="brand-text font-weight-light">Gestion de Horas Extras</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img th:src="@{/img/insignia.png}" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="#" class="d-block">Usuarios</a></div>
      </div>

      <!-- SidebarSearch Form -->
      <div class="form-inline">
        <div class="input-group" data-widget="sidebar-search">
          <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
          <div class="input-group-append">
            <button class="btn btn-sidebar">
              <i class="fas fa-search fa-fw"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          <li class="nav-item menu-open">
            <a href="#" class="nav-link active">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>
                Listados
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="#" class="nav-link active">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Horas Extras de Trabajadores</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Horas Extras de proyectos</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-th"></i>
              <p>
                Simple Link
                <span class="right badge badge-danger">New</span>
              </p>
            </a>
          </li>
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">Listado de horas extras asociados a trabajadores</h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Horas Extras</li>
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <div class="content">
      <div class="container-fluid">

        <div class="row">
          <div class="col-lg-6">
            <div class="card">
              <div class="card-body">
                <table id="Example1" class="table table-bordered table-striped">
                  <thead>
                  <tr>
                    <!--<th>ID</th>-->
                    <th>ID</th>
                    <th>CANTIDAD</th>
                    <th>ESTADO</th>
                    <th>FECHA DE AUTORIZACION</th>
                    <th>FECHA DE LA HORA EXTRA</th>
                    <th>JUSTIFICACION</th>
                  </tr>
                  </thead>
                  <tbody>
                  <!-- Aquí deberías reemplazar este bloque con los datos de tu modelo de persona -->
                  <tr th:each="horaextra, iterStat : ${hs}">
                    <!--<td th:text="${proyecto.id}"></td>-->
                    <td th:text="${horaextra.idHorasExtras}"></td>
                    <td th:text="${horaextra.cantidad}"></td>
                    <td th:text="${horaextra.estado}"></td>
                    <td th:text="${horaextra.fecha_de_autorizacion}"></td>
                    <td th:text="${horaextra.fecha}"></td>
                    <td th:text="${horaextra.justificacion}"></td>
                    <td>
                      <!-- Buscar la persona correspondiente al orgpersonaId del proyecto -->
                      <!--<span th:each="persona : ${personas}" th:if="${persona.id == proyecto.orgpersonaId}" th:text="${persona.nombre}"></span>-->
                    </td>
                  </tr>
                  <!-- Fin del bloque a reemplazar -->
                  </tbody>
                  <tfoot>
                  </tfoot>
                </table>
              </div>
            </div>

            <!--<div class="card card-primary card-outline">
              <div class="card-body">
                <h5 class="card-title">Card title</h5>

                <p class="card-text">
                  Some quick example text to build on the card title and make up the bulk of the card's
                  content.
                </p>
                <a href="#" class="card-link">Card link</a>
                <a href="#" class="card-link">Another link</a>
              </div>
            </div>--><!-- /.card -->
          </div>
        </div>
        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
    <div class="p-3">
      <h5>Title</h5>
      <p>Sidebar content</p>
    </div>
  </aside>
  <!-- /.control-sidebar -->

  <!-- Main Footer -->
  <footer class="main-footer">
    <!-- To the right -->
    <div class="float-right d-none d-sm-inline">
      Anything you want
    </div>
    <!-- Default to the left -->
    <strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights reserved.
  </footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<!-- jQuery -->
<script th:src="@{/AdminLTE-3.2.0/plugins/jquery/jquery.min.js}"></script>

<!-- Bootstrap 4 -->
<script th:src="@{/AdminLTE-3.2.0/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>

<!-- Bootstrap Switch -->
<script th:src="@{/AdminLTE-3.2.0/plugins/bootstrap-switch/js/bootstrap-switch.min.js}"></script>

<!-- Select2 -->
<script th:src="@{/AdminLTE-3.2.0/plugins/select2/js/select2.full.min.js}"></script>

<!-- Bootstrap4 Duallistbox -->
<script th:src="@{/AdminLTE-3.2.0/plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js}"></script>

<!-- InputMask -->
<script th:src="@{/AdminLTE-3.2.0/plugins/moment/moment.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/inputmask/jquery.inputmask.min.js}"></script>

<!-- Date Range Picker JS -->
<script th:src="@{/AdminLTE-3.2.0/plugins/moment/moment.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/daterangepicker/daterangepicker.js}"></script>

<!-- bootstrap color picker -->
<script th:src="@{/AdminLTE-3.2.0/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js}"></script>

<!-- Tempusdominus Bootstrap 4 -->
<script th:src="@{/AdminLTE-3.2.0/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js}"></script>

<!-- BS-Stepper -->
<script th:src="@{/AdminLTE-3.2.0/plugins/bs-stepper/js/bs-stepper.min.js}"></script>

<!-- dropzonejs -->
<script th:src="@{/AdminLTE-3.2.0/plugins/dropzone/min/dropzone.min.js}"></script>

<!-- AdminLTE App -->
<script th:src="@{/AdminLTE-3.2.0/dist/js/adminlte.min.js}"></script>

<!-- OPTIONAL SCRIPTS -->
<script th:src="@{/AdminLTE-3.2.0/plugins/chart.js/Chart.min.js}"></script>

<!-- DataTables & Plugins -->
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables/jquery.dataTables.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables-responsive/js/dataTables.responsive.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables-responsive/js/responsive.bootstrap4.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables-buttons/js/dataTables.buttons.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables-buttons/js/buttons.bootstrap4.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/jszip/jszip.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/pdfmake/pdfmake.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/pdfmake/vfs_fonts.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables-buttons/js/buttons.html5.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables-buttons/js/buttons.print.min.js}"></script>
<script th:src="@{/AdminLTE-3.2.0/plugins/datatables-buttons/js/buttons.colVis.min.js}"></script>
<!-- AdminLTE for demo purposes -->
<!-- hola -->
<!-- Page specific script -->
<script>
  $(function () {
    $("#example1").DataTable({
      "responsive": true, "lengthChange": false, "autoWidth": false,
      "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"]
    }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });
</script>

<script>
  $('#reservationdatetime').datetimepicker({
    icons: { time: 'far fa-clock' },
    format: 'YYYY-MM-DDTHH:mm:ss',
    // Opciones adicionales si es necesario
  });

</script>


<script>
  $('#reservationdatetime2').datetimepicker({
    icons: { time: 'far fa-clock' },
    format: 'YYYY-MM-DDTHH:mm:ss',
    // Opciones adicionales si es necesario
  });

</script>

<script>
  $(document).ready(function () {
    function updateCharCount() {
      var maxLength = 255;
      var currentLength = $('.descripcion').val().length;

      // Manejar saltos de línea como un solo carácter
      var lineBreaks = ($('.descripcion').val().match(/\r?\n/g) || []).length;
      currentLength += lineBreaks;

      var remainingChars = maxLength - currentLength; // Ajustar para que no sea negativo

      var countValueElement = $('.countValue');
      countValueElement.text(remainingChars);

      // Cambiar el color a naranjo cuando llegue a 0 y a rojo si es negativo
      if (remainingChars <= 0) {
        countValueElement.css('color', remainingChars < 0 ? 'red' : 'orange');
      } else {
        countValueElement.css('color', ''); // Restablecer el color a su estado original
      }
    }

    $('.descripcion').on('input', function () {
      updateCharCount();
    });

    // Llamar a la función al cargar la página para establecer el valor inicial
    updateCharCount();
  });
</script>

<script>
  $(document).ready(function () {
    // Inicialización de DataTables
    var table = $('#ACT').DataTable();
    var percentageFilter = null; // Variable para almacenar la función de filtro personalizada

    // Aplicar filtros al hacer clic en el botón de búsqueda
    window.applyFiltersACT = function () {
      var searchByNameAct = $('#searchByNameAct').val();
      var searchByResponsable = $('#searchByResponsable').val();
      var searchByOEAct = $('#searchByOEAct').val();
      var PAO = $('#PAO').val();
      var searchByPercentage = $('#searchByPercentage').val();

      // Limpiar los filtros existentes
      table.columns().search('').draw();

      // Eliminar cualquier función de filtro personalizada existente
      if (percentageFilter !== null) {
        $.fn.dataTable.ext.search.splice($.fn.dataTable.ext.search.indexOf(percentageFilter), 1);
        percentageFilter = null;
      }

      // Aplicar los filtros a las columnas respectivas
      table.column(0).search(searchByNameAct);
      table.column(8).search(searchByResponsable);
      table.column(2).search(searchByOEAct);
      table.column(5).search(PAO);

      // Aplicar el filtro personalizado para el porcentaje si se proporciona un valor de búsqueda
      if (searchByPercentage !== '') {
        // Obtener el rango de porcentaje
        var range = searchByPercentage.split('-');
        var minPercentage = parseInt(range[0]);
        var maxPercentage = parseInt(range[1]);

        // Crear la función de filtro personalizada para el porcentaje
        percentageFilter = function (settings, data, dataIndex) {
          var percentage = parseFloat(data[6]);
          return (isNaN(minPercentage) || percentage >= minPercentage) && (isNaN(maxPercentage) || percentage <= maxPercentage);
        };

        // Agregar la función de filtro personalizada
        $.fn.dataTable.ext.search.push(percentageFilter);
      }

      // Redibujar la tabla con los filtros aplicados
      table.draw();
    };
  });
</script>




<script>
  $(document).ready(function () {
    // Función para actualizar el contador de caracteres en tiempo real para la descripción de Actividad
    function updateCharCountActividad() {
      var maxLength = 255;
      var currentLength = $('.descripcionActividad').val().length;

      // Manejar saltos de línea como un solo carácter
      var lineBreaks = ($('.descripcionActividad').val().match(/\r?\n/g) || []).length;
      currentLength += lineBreaks;

      var remainingChars = maxLength - currentLength; // Ajustar para que no sea negativo

      var countValueElement = $('.countValueActividad');
      countValueElement.text(remainingChars);

      // Cambiar el color a naranjo cuando llegue a 0 y a rojo si es negativo
      if (remainingChars <= 0) {
        countValueElement.css('color', remainingChars < 0 ? 'red' : 'orange');
      } else {
        countValueElement.css('color', ''); // Restablecer el color a su estado original
      }
    }

    // Agregar evento de entrada a la casilla de descripción de Actividad
    $('.descripcionActividad').on('input', function () {
      updateCharCountActividad();
    });

    // Llamar a la función al cargar la página para establecer el valor inicial
    updateCharCountActividad();
  });
</script>
<script>
  $(document).ready(function () {
    var table = $('#example1').DataTable();

    // Elimina la instancia DataTable existente
    if ($.fn.DataTable.isDataTable('#example1')) {
      table.destroy();
    }

    table = $('#example1').DataTable({
      // Otras opciones de DataTables...
      lengthMenu: [2, 10, 25, 50], // Opciones de cantidad de entradas
      pageLength: 10 // Cantidad predeterminada de entradas por página
    });


    // Aplicar filtros al hacer clic en el botón de búsqueda
    window.applyFilters = function () {
      var searchByName = $('#searchByName').val();
      var searchByPersona = $('#searchByPersona').val();
      var incluirenpao = $('#PAO').val();
      var searchByObjetivo = $('#searchByObjetivo').val();
      var searchByProyecto = $('#searchByProyecto').val();

      table.columns(1).search(searchByName).columns(8).search(searchByPersona).columns(5).search(incluirenpao).columns(9).search(searchByObjetivo).columns(0).search(searchByProyecto).draw();
    };

    // Aplicar filtros al hacer clic en el botón de búsqueda
    window.applyFiltersLA = function () {
      var searchByLineaLA = $('#searchByLineaLA').val();
      var searchByDescripcionLA = $('#searchByDescripcionLA').val();


      table.columns(0).search(searchByLineaLA).columns(1).search(searchByDescripcionLA).draw();
    };

  });
</script>
<script>
  $(document).ready(function () {
    // Inicialización de DataTables
    var table = $('#OE').DataTable();

    // Aplicar filtros al hacer clic en el botón de búsqueda
    window.applyFiltersOE = function () {
      var searchByNameOE = $('#searchByNameOE').val();
      var searchByAliasOE = $('#searchByAliasOE').val();
      var searchByLinea = $('#searchByLinea').val();

      table.columns(0).search(searchByNameOE).columns(1).search(searchByAliasOE).columns(5).search(searchByLinea).draw();
    };
  });
</script>


<script>
  $(document).ready(function () {
    var table = $('#example2').DataTable();

    // Elimina la instancia DataTable existente
    if ($.fn.DataTable.isDataTable('#example2')) {
      table.destroy();
    }

    table = $('#example2').DataTable({
      // Otras opciones de DataTables...
      lengthMenu: [25, 50, 100, 200], // Opciones de cantidad de entradas
      pageLength: 100 // Cantidad predeterminada de entradas por página
    });

    // Función para ordenar la tabla por fecha de inicio ascendente
    function ordenarPorFechaInicioAscendente() {
      var table, rows, switching, i, x, y, shouldSwitch;
      table = document.getElementById("example2");
      switching = true;
      // Realizar un bucle hasta que no haya cambios en el orden
      while (switching) {
        switching = false;
        rows = table.rows;
        // Iniciar desde la segunda fila para evitar el encabezado
        for (i = 1; i < (rows.length - 1); i++) {
          shouldSwitch = false;
          x = rows[i].getElementsByTagName("TD")[4]; // Columna de fecha de inicio
          y = rows[i + 1].getElementsByTagName("TD")[4]; // Siguiente fila, misma columna
          // Compara las fechas como cadenas en formato yyyy-mm-dd
          if (x.innerHTML > y.innerHTML) {
            shouldSwitch = true;
            break;
          }
        }
        if (shouldSwitch) {
          rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
          switching = true;
        }
      }
    }

    // Ordenar la tabla por fecha de inicio al cargar la página
    window.onload = function () {
      ordenarPorFechaInicioAscendente();
    }
  });
</script>

<script th:inline="javascript">
  /*<![SCRIPT QUE RESETEA LA PAGINA DESPUES DE USAR UN FORMULARIO[*/
  /*<![CDATA[*/
  $(document).ready(function() {
    $('form').submit(function(e) {
      e.preventDefault(); // Prevenir el envío normal del formulario

      $.ajax({
        type: $(this).attr('method'),
        url: $(this).attr('action'),
        data: $(this).serialize(),
        success: function(response) {
          // Recargar la página después de un breve retraso (por ejemplo, 500 ms)
          setTimeout(function() {
            location.reload();
          }, 500);
        },
        error: function(error) {
          console.log(error);
          // Manejar errores si es necesario
        }
      });
    });
  });
  /*]]>*/
</script>




<!-- Script para configurar Date Range Picker y validar fechas -->
<script th:inline="javascript">
  $(document).ready(function(){
    // Configurar Date Range Picker para los campos de fecha
    $('.daterange').daterangepicker({
      singleDatePicker: true,
      showDropdowns: true,
      autoApply: true,
      locale: {
        format: 'YYYY-MM-DD',
        separator: ' - ',
        applyLabel: 'Aplicar',
        cancelLabel: 'Cancelar',
        fromLabel: 'De',
        toLabel: 'A',
        customRangeLabel: 'Personalizado',
        daysOfWeek: ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'],
        monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
        firstDay: 1
      }
    });

    // Validar fechas al enviar el formulario de Crear Nueva Actividad
    $('#formActividad').submit(function(e) {
      var fechaInicio = moment($('#fechainicio').val(), 'YYYY-MM-DD');
      var fechaTermino = moment($('#fechatermino').val(), 'YYYY-MM-DD');

      if (!fechaInicio.isValid() || !fechaTermino.isValid() || fechaTermino.isBefore(fechaInicio) || fechaInicio.isAfter(fechaTermino)) {
        alert('Ingrese fechas válidas. La fecha de término no puede ser anterior a la fecha de inicio, y viceversa.');
        e.preventDefault(); // Evitar el envío del formulario si las fechas no son válidas
      }
    });
  });
</script>



<!-- Script para abrir el popup -->
<script th:inline="javascript">
  function openPopup(url) {
    // Obtener las dimensiones de la ventana principal
    var parentWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
    var parentHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;

    // Definir las dimensiones del popup
    var popupWidth = 600;
    var popupHeight = 900;

    // Calcular las coordenadas para centrar el popup
    var left = (parentWidth - popupWidth) / 2;
    var top = (parentHeight - popupHeight) / 2;

    // Abrir el popup en el centro
    var popupWindow = window.open(url, '_blank', 'width=' + popupWidth + ',height=' + popupHeight + ',left=' + left + ',top=' + top + ',scrollbars=yes,toolbar=no,location=no');

    // Agregar un evento para detectar cuando se cierra la ventana emergente
    if (popupWindow) {
      popupWindow.addEventListener('beforeunload', function () {
        // Recargar la página principal cuando se cierra la ventana emergente
        location.reload();
      });
    }
  }
</script>



<!-- Add this modal at the end of your HTML body -->

<div class="modal fade" id="deleteConfirmationModal" tabindex="-1" role="dialog" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirmar Accion</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ¿Estas seguro que deseas eliminar este elemento?
        <span id="confirmationMessage"></span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Borrar</button>
      </div>
    </div>
  </div>
</div>

<script th:inline="javascript">
  function showDeleteConfirmation1(id, entityName) {
    // Show the confirmation modal
    $('#deleteConfirmationModal').modal('show');

    // Handle modal confirm button click
    $('#confirmDeleteBtn').off('click').on('click', function () {
      deleteProyectoLinea(id);
    });
  }

  function deleteProyectoLinea(id) {
    var xhr = new XMLHttpRequest();
    xhr.open('DELETE', '/ProyectoLinea/eliminar/REST/' + id, true);
    xhr.onload = function () {
      if (xhr.status === 204) {
        // Operation successful, you can do something after deletion
        // For example, reload the current page
        location.reload();
      } else {
        // Handle the error if necessary
        alert('Error deleting the entity.');
      }
    };
    xhr.send();
  }
</script>


<script th:inline="javascript">
  function showDeleteConfirmation2(id, ProyectoId) {

    // Show the confirmation modal
    $('#deleteConfirmationModal').modal('show');

    // Handle modal confirm button click
    $('#confirmDeleteBtn').off('click').on('click', function () {
      deleteActividad(id,ProyectoId);
    });
  }

  function deleteActividad(id,ProyectoId) {
    var xhr = new XMLHttpRequest();
    xhr.open('DELETE', '/actividad/eliminar/REST/' + id +'/' + ProyectoId, true);
    xhr.onload = function () {
      if (xhr.status === 204) {
        // Operation successful, you can do something after deletion
        // For example, reload the current page
        location.reload();
      } else {
        // Handle the error if necessary
        alert('Error deleting the entity.');
      }
    };
    xhr.send();
  }
</script>

<script th:inline="javascript">
  function showDeleteConfirmation3(id, entityName) {

    // Show the confirmation modal
    $('#deleteConfirmationModal').modal('show');

    // Handle modal confirm button click
    $('#confirmDeleteBtn').off('click').on('click', function () {
      deleteObjetivoEspecifico(id);
    });
  }

  function deleteObjetivoEspecifico(id) {
    var xhr = new XMLHttpRequest();
    xhr.open('DELETE', '/ObjetivoEspecifico/eliminar/REST/' + id, true);
    xhr.onload = function () {
      if (xhr.status === 204) {
        // Operation successful, you can do something after deletion
        // For example, reload the current page
        location.reload();
      } else {
        // Handle the error if necessary
        alert('Error deleting the entity.');
      }
    };
    xhr.send();
  }


</script>

<script>
  $(function () {
    //Initialize Select2 Elements
    $('.select2').select2()

    //Initialize Select2 Elements
    $('.select2bs4').select2({
      theme: 'bootstrap4'
    })

    //Datemask dd/mm/yyyy
    $('#datemask').inputmask('dd/mm/yyyy', { 'placeholder': 'dd/mm/yyyy' })
    //Datemask2 mm/dd/yyyy
    $('#datemask2').inputmask('mm/dd/yyyy', { 'placeholder': 'mm/dd/yyyy' })
    //Money Euro
    $('[data-mask]').inputmask()

    //Date picker
    $('#reservationdate').datetimepicker({
      format: 'L'
    });

    //Date and time picker
    $('#reservationdatetime').datetimepicker({ icons: { time: 'far fa-clock' } });

    $('#reservationdatetime2').datetimepicker({ icons: { time: 'far fa-clock' } });

    //Date range picker
    $('#reservation').daterangepicker()
    //Date range picker with time picker
    $('#reservationtime').daterangepicker({
      timePicker: true,
      timePickerIncrement: 30,
      startDate: moment().startOf('hour'),
      endDate: moment().startOf('hour').add(1, 'hour'),
      locale: {
        format: 'YYYY-MM-DDTHH:mm:ss.SSSZ'
      }
    })
    //Date range as a button
    $('#daterange-btn').daterangepicker(
            {
              ranges   : {
                'Today'       : [moment(), moment()],
                'Yesterday'   : [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                'Last 7 Days' : [moment().subtract(6, 'days'), moment()],
                'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                'This Month'  : [moment().startOf('month'), moment().endOf('month')],
                'Last Month'  : [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
              },
              startDate: moment().subtract(29, 'days'),
              endDate  : moment()
            },
            function (start, end) {
              $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'))
            }
    )

    $('#daterange-btn2').daterangepicker(
            {
              ranges   : {
                'Today'       : [moment(), moment()],
                'Yesterday'   : [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                'Last 7 Days' : [moment().subtract(6, 'days'), moment()],
                'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                'This Month'  : [moment().startOf('month'), moment().endOf('month')],
                'Last Month'  : [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
              },
              startDate: moment().subtract(29, 'days'),
              endDate  : moment()
            },
            function (start, end) {
              $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'))
            }
    )

    //Timepicker
    $('#timepicker').datetimepicker({
      format: 'LT'
    })

    //Bootstrap Duallistbox
    $('.duallistbox').bootstrapDualListbox()

    //Colorpicker
    $('.my-colorpicker1').colorpicker()
    //color picker with addon
    $('.my-colorpicker2').colorpicker()

    $('.my-colorpicker2').on('colorpickerChange', function(event) {
      $('.my-colorpicker2 .fa-square').css('color', event.color.toString());
    })

    $("input[data-bootstrap-switch]").each(function(){
      $(this).bootstrapSwitch('state', $(this).prop('checked'));
    })

  })
  // BS-Stepper Init
  document.addEventListener('DOMContentLoaded', function () {
    window.stepper = new Stepper(document.querySelector('.bs-stepper'))
  })

  // DropzoneJS Demo Code Start
  Dropzone.autoDiscover = false

  // Get the template HTML and remove it from the doumenthe template HTML and remove it from the doument
  var previewNode = document.querySelector("#template")
  previewNode.id = ""
  var previewTemplate = previewNode.parentNode.innerHTML
  previewNode.parentNode.removeChild(previewNode)

  var myDropzone = new Dropzone(document.body, { // Make the whole body a dropzone
    url: "/target-url", // Set the url
    thumbnailWidth: 80,
    thumbnailHeight: 80,
    parallelUploads: 20,
    previewTemplate: previewTemplate,
    autoQueue: false, // Make sure the files aren't queued until manually added
    previewsContainer: "#previews", // Define the container to display the previews
    clickable: ".fileinput-button" // Define the element that should be used as click trigger to select files.
  })

  myDropzone.on("addedfile", function(file) {
    // Hookup the start button
    file.previewElement.querySelector(".start").onclick = function() { myDropzone.enqueueFile(file) }
  })

  // Update the total progress bar
  myDropzone.on("totaluploadprogress", function(progress) {
    document.querySelector("#total-progress .progress-bar").style.width = progress + "%"
  })

  myDropzone.on("sending", function(file) {
    // Show the total progress bar when upload starts
    document.querySelector("#total-progress").style.opacity = "1"
    // And disable the start button
    file.previewElement.querySelector(".start").setAttribute("disabled", "disabled")
  })

  // Hide the total progress bar when nothing's uploading anymore
  myDropzone.on("queuecomplete", function(progress) {
    document.querySelector("#total-progress").style.opacity = "0"
  })

  // Setup the buttons for all transfers
  // The "add files" button doesn't need to be setup because the config
  // `clickable` has already been specified.
  document.querySelector("#actions .start").onclick = function() {
    myDropzone.enqueueFiles(myDropzone.getFilesWithStatus(Dropzone.ADDED))
  }
  document.querySelector("#actions .cancel").onclick = function() {
    myDropzone.removeAllFiles(true)
  }
  // DropzoneJS Demo Code End
</script>

</body>
</html>
